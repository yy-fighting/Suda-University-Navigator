<!-- index.wxml 适配版 -->
<view class="container">
  <!-- 地图容器（已适配动态坐标） -->
  <map
    id="map"
    latitude="{{mapCenter.latitude}}"
    longitude="{{mapCenter.longitude}}"
    markers="{{markers}}"
    polyline="{{polyline}}" 
    scale="16"
    style="width: 100%; height: 70vh;"
    show-location
  ></map>
  
  <view class="title">江南文化旅游路线</view>

  <view class="card-background">
    <view class="tab-text">沿途景点</view>
    <!-- 这边要只留下景点这一个卡片 -->
    <swiper 
      class="content-swiper" 
      current="{{currentSwiper}}"
      bindchange="onSwiperChange"
    >
      <block wx:for="{{cards[currentTab]}}" wx:key="index">
        <swiper-item>
          <view class="info-card">
            <!-- 顶部图片 -->
            <view class="image-wrapper">
              <image 
                src="{{item.image}}" 
                mode="aspectFill" 
                class="card-image"
                lazy-load="true"
              ></image>
            </view>

            <view class="title-row">
              <view class="card-title">{{item.name}}</view>
              <view class="open-time">开放时间：{{item.openTime}}</view>
            </view>

            <!-- 文字内容区 -->
            <view class="content-area">
              <text class="card-desc">{{item.description}}</text>
            </view>
            <button 
                class="action-button" 
                bindtap="navigateTo" 
                data-location="{{item}}"
              >
                <text class="btn-text">开始导航</text>
            </button>
          </view>
        </swiper-item>
      </block>
    </swiper>
  </view>
</view>
